** Concept Flow ----
User Input тЖТ Stored Procedure тЖТ Main Table Insert/Update/Delete тЖТ Trigger тЖТ Log Table Update тЖТ (Optionally) View Table Auto Update

-- Use the appropriate database
USE mydatabase;

-- Create police_station table
CREATE TABLE IF NOT EXISTS police_station (
  id INT AUTO_INCREMENT PRIMARY KEY COMMENT 'рж╕рзНржЯрзЗрж╢ржирзЗрж░ ржЕржнрзНржпржирзНрждрж░рзАржг ржЖржЗржбрж┐',
  police_id VARCHAR(50) NOT NULL UNIQUE COMMENT 'ржЕржЯрзЛ ржЬрзЗржирж╛рж░рзЗржЯрзЗржб ржЗржЙржирж┐ржХ ржкрзБрж▓рж┐рж╢ ржЖржЗржбрж┐ WBINC31072025HOOG1',
  officer_name VARCHAR(100) NOT NULL COMMENT 'ржЕржлрж┐рж╕рж╛рж░рзЗрж░ ржирж╛ржо',
  inv_gender ENUM('M', 'F', 'O') NOT NULL COMMENT 'ржкрзБрж░рзБрж╖, ржорж╣рж┐рж▓рж╛, ржмрж╛ ржЕржирзНржпрж╛ржирзНржп',
  branch_name VARCHAR(100) NOT NULL COMMENT 'рж╢рж╛ржЦрж╛рж░ ржирж╛ржо ржпрзЗржоржи - CID, ржЗржиржЪрж╛рж░рзНржЬ',
  district VARCHAR(100) NOT NULL COMMENT 'ржЬрзЗрж▓рж╛ ржпрзЗржоржи - HOOG, KOLKATA',
  password_hash VARCHAR(255) NOT NULL COMMENT 'рж╕рзБрж░ржХрзНрж╖рж┐ржд ржкрж╛рж╕ржУрзЯрж╛рж░рзНржб (рж╣рзНржпрж╛рж╢ ржХрж░рж╛)',
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP COMMENT 'рждрзИрж░рж┐рж░ рж╕ржорзЯ'
);

USE mydatabase;

-- ЁЯФТ Criminal Info ржЯрзЗржмрж┐рж▓ рждрзИрж░рж┐
CREATE TABLE IF NOT EXISTS criminal_info (
  id INT NOT NULL AUTO_INCREMENT UNIQUE PRIMARY KEY COMMENT 'ржЕржЯрзЛ ржЬрзЗржирж╛рж░рзЗржЯрзЗржб ржЕржкрж░рж╛ржзрзА ржЖржЗржбрж┐ WBCR31072025HOOG1',
  police_id VARCHAR(50) COMMENT 'ржкрзБрж▓рж┐рж╢ ржЕржлрж┐рж╕рж╛рж░рзЗрж░ ржЗржЙржирж┐ржХ ржЖржЗржбрж┐ WBINC31072025HOOG1',
  name VARCHAR(100) NOT NULL COMMENT 'ржЕржкрж░рж╛ржзрзАрж░ ржирж╛ржо',
  cr_gender ENUM('M', 'F', 'O') NOT NULL COMMENT 'ржкрзБрж░рзБрж╖, ржорж╣рж┐рж▓рж╛, ржмрж╛ ржЕржирзНржпрж╛ржирзНржп',
  aadhaar VARCHAR(20) NOT NULL UNIQUE COMMENT 'ржЖржзрж╛рж░ ржиржорзНржмрж░',
  address TEXT COMMENT 'ржарж┐ржХрж╛ржирж╛',
  phone VARCHAR(15) UNIQUE COMMENT 'ржлрзЛржи ржиржорзНржмрж░',
  photo_url TEXT COMMENT 'ржЫржмрж┐рж░ рж▓рж┐ржВржХ',
  local_file_path VARCHAR(255) COMMENT 'рж▓рзЛржХрж╛рж▓ ржлрж╛ржЗрж▓ ржкрж╛рже',
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP COMMENT 'рждрзИрж░рж┐рж░ рждрж╛рж░рж┐ржЦ',
  FOREIGN KEY (police_id) REFERENCES police_station(police_id) ON DELETE SET NULL
);

-- ЁЯУД Criminal Description ржЯрзЗржмрж┐рж▓ рждрзИрж░рж┐
CREATE TABLE IF NOT EXISTS criminal_description (
  id INT NOT NULL AUTO_INCREMENT UNIQUE PRIMARY KEY COMMENT 'ржЕржЯрзЛ ржЬрзЗржирж╛рж░рзЗржЯрзЗржб ржмрж┐ржмрж░ржг ржЖржЗржбрж┐',
  criminal_id INT NOT NULL COMMENT 'ржЕржкрж░рж╛ржзрзАрж░ ржЗржЙржирж┐ржХ ржЖржЗржбрж┐ (criminal_info ржПрж░ id)',
  police_id VARCHAR(50) COMMENT 'рждржжржирзНрждржХрж╛рж░рзА ржкрзБрж▓рж┐рж╢ ржЕржлрж┐рж╕рж╛рж░рзЗрж░ ржЖржЗржбрж┐',
  type VARCHAR(100) NOT NULL COMMENT 'ржЕржкрж░рж╛ржзрзЗрж░ ржзрж░ржг',
  fir_place VARCHAR(100) COMMENT 'FIR ржХрзЛржерж╛рзЯ рж╣рзЯрзЗржЫрзЗ',
  date DATE NOT NULL COMMENT 'ржЕржкрж░рж╛ржзрзЗрж░ рждрж╛рж░рж┐ржЦ',
  time TIME COMMENT 'ржЕржкрж░рж╛ржзрзЗрж░ рж╕ржорзЯ',
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP COMMENT 'рждрзИрж░рж┐рж░ рж╕ржорзЯ',
  FOREIGN KEY (criminal_id) REFERENCES criminal_info(id) ON DELETE CASCADE,
  FOREIGN KEY (police_id) REFERENCES police_station(police_id) ON DELETE SET NULL
);


ржзрж░рзБржи, ржЖржкржирж┐ ржПржХржЯрж┐ ржкрзБрж▓рж┐рж╢ рж░рзЗржЬрж┐рж╕рзНржЯрзНрж░рзЗрж╢ржи рж╕рж┐рж╕рзНржЯрзЗржо ржмрж╛ржирж╛ржЪрзНржЫрзЗржиред ржпржЦржи ржПржХржЬржи police_id рж░рзЗржЬрж┐рж╕рзНржЯрж╛рж░ рж╣рзЯ, рждржЦржи рж╢рзБржзрзБ police_station ржЯрзЗржмрж┐рж▓рзЗ
 рждрж╛рж░ рждржерзНржп ржЧрзЗрж▓рзЗ ржкрж░рзЗ ржЬрж╛ржирж╛ ржпрж╛ржмрзЗ ржирж╛ ржХржмрзЗ ржмрж╛ ржХржЦржи рж╕рзЗржЗ рж░рзЗржЬрж┐рж╕рзНржЯрзНрж░рзЗрж╢ржи рж╣рзЯрзЗржЫрж┐рж▓ред

ржПржЗ рж╕ржорзЯ registration_logs ржЯрзЗржмрж┐рж▓ ржПржХржЯрж┐ рж░рзЗржЬрж┐рж╕рзНржЯрзНрж░рзЗрж╢ржи ржЗрждрж┐рж╣рж╛рж╕ (history) рж╕ржВрж░ржХрзНрж╖ржг ржХрж░рзЗред

CREATE TABLE registration_logs (
  id INT AUTO_INCREMENT PRIMARY KEY,
  police_id VARCHAR(255) NOT NULL,
  registered_at DATETIME DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE invstregistrationregistration_logs (
    registration_logs_id INT PRIMARY KEY AUTO_INCREMENT NOT NULL COMMENT 'ржЕржЯрзЛ ржЬрзЗржирж╛рж░рзЗржЯрзЗржб Registration ржЕржнрзНржпржирзНрждрж░рзАржг ржЖржЗржбрж┐',
    police_id VARCHAR(50) NOT NULL UNIQUE COMMENT 'ржЗржЙржирж┐ржХ ржкрзБрж▓рж┐рж╢ ржЖржЗржбрж┐ ржпрзЗржоржи: WBINC31072025HOOG1',
    officer_name VARCHAR(100) NOT NULL COMMENT 'ржЕржлрж┐рж╕рж╛рж░рзЗрж░ ржирж╛ржо',
    branch_name VARCHAR(100) NOT NULL COMMENT 'рж╢рж╛ржЦрж╛рж░ ржирж╛ржо ржпрзЗржоржи: CID, ржЗржиржЪрж╛рж░рзНржЬ',
    district VARCHAR(100) NOT NULL COMMENT 'ржЬрзЗрж▓рж╛ ржпрзЗржоржи: HOOG, KOLKATA',
    created_date DATE COMMENT 'рждрзИрж░рж┐рж░ рждрж╛рж░рж┐ржЦ',
    created_time TIME COMMENT 'рждрзИрж░рж┐рж░ рж╕ржоржпрж╝   23:22:40',
    created_time_ampm VARCHAR(11) COMMENT 'рждрзИрж░рж┐рж░ рж╕ржоржпрж╝  12:00:00 AM/PM'
);

CREATE TABLE criminal_log (
    log_id INT AUTO_INCREMENT PRIMARY KEY,         -- ржЗржЙржирж┐ржХ рж▓ржЧ ржЖржЗржбрж┐, ржЕржЯрзЛржЗржиржХрзНрж░рж┐ржорзЗржирзНржЯ
    criminal_id INT NOT NULL,                       -- ржЕржкрж░рж╛ржзрзАрж░ ржЖржЗржбрж┐ (foreign key рж╣рж┐рж╕рзЗржмрзЗ ржмрзНржпржмрж╣рзГржд рж╣рждрзЗ ржкрж╛рж░рзЗ)
    action VARCHAR(50) NOT NULL,                    -- ржХрзА ржХрж╛ржЬ рж╣рзЯрзЗржЫрзЗ (ржпрзЗржоржи: 'Set Inactive')
    action_time TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,  -- ржХржЦржи ржХрж░рж╛ рж╣рзЯрзЗржЫрзЗ, ржбрж┐ржлрж▓рзНржЯрзЗ ржПржЦржиржХрж╛рж░ рж╕ржорзЯ
    CONSTRAINT fk_criminal FOREIGN KEY (criminal_id) REFERENCES criminal_info(id) 
        ON DELETE CASCADE,                          -- ржпржжрж┐ ржорзВрж▓ criminal_info рж░рзЗржХрж░рзНржб ржбрж┐рж▓рж┐ржЯ рж╣рзЯ, рждрж╛рж╣рж▓рзЗ ржПржЗ рж▓ржЧ рж░рзЗржХрж░рзНржбржЧрзБрж▓рзЛржУ рж╕рзНржмрзЯржВржХрзНрж░рж┐рзЯржнрж╛ржмрзЗ ржорзБржЫрзЗ ржпрж╛ржмрзЗ (ржбрж╛ржЯрж╛ ржЗржирзНржЯрж┐ржЧрзНрж░рж┐ржЯрж┐ рж░рж╛ржЦрж╛рж░ ржЬржирзНржп)
    INDEX idx_criminal_id (criminal_id)             -- ржкрж╛рж░ржлрж░ржорзНржпрж╛ржирзНрж╕рзЗрж░ ржЬржирзНржп ржЗржиржбрзЗржХрзНрж╕
);

-- ALTER TABLE criminal_info MODIFY photo_url JSON;

-- ALTER TABLE police_station 
-- ADD COLUMN investStatus ENUM('A', 'I', 'S') NOT NULL DEFAULT 'A';

-- ALTER TABLE police_station 
-- MODIFY COLUMN investStatus ENUM('A', 'I', 'S') NOT NULL DEFAULT 'A';
-- -- where A : Active, I : Inactive, S : Suspended 

Table ржирж╛ржо ржкрж░рж┐ржмрж░рзНрждржи (Rename) - RENAME TABLE police_station TO new_police_station;  -- police_station ржЯрзЗржмрж┐рж▓рзЗрж░ ржирж╛ржо ржмржжрж▓рж╛ржмрзЗ

ржирждрзБржи ржХрж▓рж╛ржо ржпрзЛржЧ ржХрж░рж╛ - ALTER TABLE police_station ADD COLUMN station_code VARCHAR(20);  -- ржирждрзБржи station_code ржХрж▓рж╛ржо ржЕрзНржпрж╛ржб рж╣ржмрзЗ

ржХрж▓рж╛ржо ржирж╛ржо ржкрж░рж┐ржмрж░рзНрждржи - ALTER TABLE police_station CHANGE COLUMN old_column_name new_column_name VARCHAR(50);  -- old_column_name ржХрзЗ ржирждрзБржи ржирж╛ржорзЗ ржкрж░рж┐ржмрж░рзНрждржи ржХрж░ржмрзЗ

ржХрж▓рж╛ржорзЗрж░ ржбрзЗржЯрж╛ ржЯрж╛ржЗржк ржкрж░рж┐ржмрж░рзНрждржи - ALTER TABLE police_station MODIFY COLUMN station_code INT;  -- station_code ржХрж▓рж╛ржорзЗрж░ ржЯрж╛ржЗржк INT рж╣ржмрзЗ

ржХрж▓рж╛ржо ржбрж┐рж▓рж┐ржЯ ржХрж░рж╛ - ALTER TABLE police_station DROP COLUMN station_code;  -- station_code ржХрж▓рж╛ржо ржорзБржЫрзЗ ржпрж╛ржмрзЗ

ржЯрзЗржмрж┐рж▓рзЗрж░ рж╕ржм ржбрзЗржЯрж╛ ржбрж┐рж▓рж┐ржЯ ржХрж░рж╛ - TRUNCATE TABLE police_station;  -- ржЯрзЗржмрж┐рж▓рзЗрж░ рж╕ржм ржбрзЗржЯрж╛ ржбрж┐рж▓рж┐ржЯ рж╣ржмрзЗ ржХрж┐ржирзНрждрзБ рж╕рзНржЯрзНрж░рж╛ржХржЪрж╛рж░ ржерж╛ржХржмрзЗ / DELETE FROM police_station;  -- рж╕ржм ржбрзЗржЯрж╛ ржбрж┐рж▓рж┐ржЯ рж╣ржмрзЗ ржХрж┐ржирзНрждрзБ AUTO_INCREMENT рж░рж┐рж╕рзЗржЯ рж╣ржмрзЗ ржирж╛

ржЯрзЗржмрж┐рж▓ рж╕ржорзНржкрзВрж░рзНржг ржбрж┐рж▓рж┐ржЯ - DROP TABLE police_station;  -- ржЯрзЗржмрж┐рж▓ ржУ ржбрзЗржЯрж╛ рж╕ржорзНржкрзВрж░рзНржг ржбрж┐рж▓рж┐ржЯ рж╣рзЯрзЗ ржпрж╛ржмрзЗ

Store Procedure Show & Delete - 
SHOW PROCEDURE STATUS WHERE Db = 'your_database_name';  -- ЁЯУМ рж╕ржм рж╕рзНржЯрзЛрж░ ржкрзНрж░рзЛрж╕рж┐ржбрж┐ржЙрж░ ржжрзЗржЦрж╛ржмрзЗ
SHOW CREATE PROCEDURE procedure_name;                   -- ЁЯУМ ржирж┐рж░рзНржжрж┐рж╖рзНржЯ ржкрзНрж░рзЛрж╕рж┐ржбрж┐ржЙрж░рзЗрж░ ржХрзЛржб ржжрзЗржЦрж╛ржмрзЗ
DROP PROCEDURE IF EXISTS procedure_name;  -- ЁЯУМ ржкрзНрж░рзЛрж╕рж┐ржбрж┐ржЙрж░ ржорзБржЫрзЗ ржлрзЗрж▓ржмрзЗ

Trigger Show & Delete -
SHOW TRIGGERS;  -- ЁЯУМ рж╕ржм ржЯрзНрж░рж┐ржЧрж╛рж░ ржжрзЗржЦрж╛ржмрзЗ
SHOW CREATE TRIGGER trigger_name;  -- ЁЯУМ ржирж┐рж░рзНржжрж┐рж╖рзНржЯ ржЯрзНрж░рж┐ржЧрж╛рж░рзЗрж░ ржХрзЛржб ржжрзЗржЦрж╛ржмрзЗ
DROP TRIGGER IF EXISTS trigger_name;  -- ЁЯУМ ржЯрзНрж░рж┐ржЧрж╛рж░ ржорзБржЫрзЗ ржлрзЗрж▓ржмрзЗ

Index Show & Delete - 
SHOW INDEXES FROM table_name;  -- ЁЯУМ ржирж┐рж░рзНржжрж┐рж╖рзНржЯ ржЯрзЗржмрж┐рж▓рзЗрж░ рж╕ржм ржЗржиржбрзЗржХрзНрж╕ ржжрзЗржЦрж╛ржмрзЗ
DROP INDEX index_name ON table_name;  -- ЁЯУМ ржЗржиржбрзЗржХрзНрж╕ ржорзБржЫрзЗ ржлрзЗрж▓ржмрзЗ

View Show & Delete - 
SHOW FULL TABLES WHERE Table_type = 'VIEW';  -- ЁЯУМ рж╕ржм ржнрж┐ржЙ ржжрзЗржЦрж╛ржмрзЗ
SHOW CREATE VIEW view_name;                  -- ЁЯУМ ржнрж┐ржЙ ржПрж░ ржХрзЛржб ржжрзЗржЦрж╛ржмрзЗ
DROP VIEW IF EXISTS view_name;  -- ЁЯУМ ржнрж┐ржЙ ржорзБржЫрзЗ ржлрзЗрж▓ржмрзЗ

| ржмрж┐рж╖рзЯ       | Log Table ЁЯУЭ                           | View Table ЁЯСА                              |
| ---------- | -------------------------------------- | ------------------------------------------ |
| ржбрзЗржЯрж╛ рж░рж╛ржЦрзЗ? | рж╣рзНржпрж╛ржБ (ржЖрж╕рж▓ ржбрзЗржЯрж╛ ржерж╛ржХрзЗ)                      | ржирж╛ (рж╢рзБржзрзБ ржЕржирзНржп ржЯрзЗржмрж┐рж▓ ржерзЗржХрзЗ ржбрзЗржЯрж╛ ржжрзЗржЦрж╛рзЯ)       |
| ржЙржжрзНржжрзЗрж╢рзНржп   | ржбрзЗржЯрж╛рж░ ржЗрждрж┐рж╣рж╛рж╕ ржмрж╛ ржкрж░рж┐ржмрж░рзНрждржирзЗрж░ рж░рзЗржХрж░рзНржб рж░рж╛ржЦрж╛          | ржбрзЗржЯрж╛ рж░рж┐ржб-ржУржирж▓рж┐ ржлрж░ржорзНржпрж╛ржЯрзЗ ржжрзЗржЦрж╛                |
| ржкрж░рж┐ржмрж░рзНрждржи?  | ржбрзЗржЯрж╛ ржЖржкржбрзЗржЯ/ржЗржирж╕рж╛рж░рзНржЯ ржХрж░рж╛ ржпрж╛рзЯ                 | рж╕рж░рж╛рж╕рж░рж┐ ржбрзЗржЯрж╛ ржЖржкржбрзЗржЯ ржХрж░рж╛ ржпрж╛рзЯ ржирж╛               |
| ржирж┐рж░рж╛ржкрждрзНрждрж╛  | рж░рзЗржХрж░рзНржб ржкрзНрж░рзБржл рж╣рж┐рж╕рзЗржмрзЗ ржХрж╛ржЬрзЗ рж▓рж╛ржЧрзЗ                 | рж╣рзНржпрж╛ржХрж╛рж░ржжрзЗрж░ ржерзЗржХрзЗ ржЖрж╕рж▓ ржЯрзЗржмрж┐рж▓ рж▓рзБржХрж╛рждрзЗ ржХрж╛ржЬрзЗ рж▓рж╛ржЧрзЗ |

View Table Create  - 
-- Police Station View рждрзИрж░рж┐
CREATE VIEW view_police_station AS
SELECT id, police_id, officer_name, branch_name, district, created_at
FROM police_station
WITH CHECK OPTION; -- ЁЯУМ ржбрзЗржЯрж╛ ржЖрж╕рж▓ ржЯрзЗржмрж┐рж▓рзЗ ржпрж╛ржмрзЗ, View-ржПржУ ржжрзЗржЦрж╛ ржпрж╛ржмрзЗ

-- Criminal Info View рждрзИрж░рж┐
CREATE VIEW view_criminal_info AS
SELECT 
    id, 
    police_id, 
    name, 
    aadhaar, 
    address, 
    phone, 
    photo_url, 
    local_file_path, 
    created_at
FROM criminal_info
WITH CHECK OPTION; 
-- ЁЯУМ ржорзВрж▓ criminal_info ржЯрзЗржмрж┐рж▓рзЗ insert/update ржХрж░рж▓рзЗ view-ржПржУ reflect рж╣ржмрзЗ

-- Criminal Description View рждрзИрж░рж┐
CREATE VIEW view_criminal_description AS
SELECT 
    id, 
    criminal_id, 
    police_id, 
    type, 
    fir_place, 
    date, 
    time, 
    created_at
FROM criminal_description
WITH CHECK OPTION; 
-- ЁЯУМ ржорзВрж▓ criminal_description ржЯрзЗржмрж┐рж▓рзЗ insert/update ржХрж░рж▓рзЗ view-ржПржУ reflect рж╣ржмрзЗ

INSERT INTO view_police_station (station_id, station_name, station_address)
VALUES (1, 'Kolkata Central', 'Park Street');

ржбрзЗржбрж▓ржХ рж╣рж▓рзЗ SHOW PROCESSLIST; ржЪрж╛рж▓рж┐ржпрж╝рзЗ ржЪрж▓ржорж╛ржи ржХрзБржпрж╝рзЗрж░рж┐рж░ id ржирж┐ржпрж╝рзЗ KILL id; ржХржорж╛ржирзНржб ржжрж┐ржпрж╝рзЗ ржмржирзНржз ржХрж░рзБржиред

ALTER TABLE criminal_description ADD pdfFile LONGBLOB;

| ржмрж┐рж╖рзЯ                  | **VARCHAR(500)**                                                | **LONGBLOB**                          |
| --------------------- | --------------------------------------------------------------- | ------------------------------------- |
| **ржХрж┐ рж░рж╛ржЦрзЗ?**          | рж╢рзБржзрзБ ржЯрзЗржХрзНрж╕ржЯ (ржпрзЗржоржи ржлрж╛ржЗрж▓рзЗрж░ ржирж╛ржо ржмрж╛ ржкрж╛рже)                            | ржлрж╛ржЗрж▓рзЗрж░ ржмрж╛ржЗржирж╛рж░рж┐ ржбрзЗржЯрж╛ (ржкрзБрж░рзЛ PDF ржлрж╛ржЗрж▓)   |
| **рж╕рзНржЯрзЛрж░рзЗржЬ**           | ржЕржирзЗржХ ржХржо рж▓рж╛ржЧрзЗ                                                    | ржЕржирзЗржХ ржмрзЗрж╢рж┐ рж▓рж╛ржЧрзЗ                        |
| **ржкрж╛рж░ржлрж░ржорзНржпрж╛ржирзНрж╕**      | ржлрж╛рж╕рзНржЯ                                                           | рж╕рзНрж▓рзЛ (ржмрзЬ ржбрзЗржЯрж╛ рж╣рзНржпрж╛ржирзНржбрж▓ ржХрж░рждрзЗ рж╣рзЯ)       |
| **ржмрзНржпржмрж╣рж╛рж░ ржХржмрзЗ ржХрж░ржмрзЛ?** | ржлрж╛ржЗрж▓ рж╕рж╛рж░рзНржнрж╛рж░/ржлрзЛрж▓рзНржбрж╛рж░рзЗ рж░рзЗржЦрзЗ рж╢рзБржзрзБ ржирж╛ржо ржмрж╛ ржкрж╛рже ржбрж╛ржЯрж╛ржмрзЗрж╕рзЗ рж░рж╛ржЦрждрзЗ ржЪрж╛ржЗрж▓рзЗ | ржкрзБрж░рзЛ ржлрж╛ржЗрж▓ рж╕рж░рж╛рж╕рж░рж┐ ржбрж╛ржЯрж╛ржмрзЗрж╕рзЗ рж░рж╛ржЦрждрзЗ ржЪрж╛ржЗрж▓рзЗ |
| **ржЙржжрж╛рж╣рж░ржг**            | `'criminal.pdf'` ржмрж╛ `'/uploads/criminal.pdf'`                   | 2MB PDF-ржПрж░ ржмрж╛ржЗржирж╛рж░рж┐ ржбрзЗржЯрж╛               |

| Feature               | html-pdf               | puppeteer                     |
| --------------------- | ---------------------- | ----------------------------- |
| Rendering engine      | PhantomJS (deprecated) | Headless Chrome               |
| Modern CSS/JS support | рж╕рзАржорж┐ржд                  | ржкрзВрж░рзНржг                         |
| Maintenance           | ржХржо ржмрж╛ ржирзЗржЗ              | Active                        |
| File size (install)   | ржЫрзЛржЯ                    | ржмрзЬ                            |
| Performance           | ржжрзНрж░рзБржд ржХрж┐ржирзНрждрзБ ржХржо ржлрж┐ржЪрж╛рж░  | ржХрж┐ржЫрзБржЯрж╛ ржнрж╛рж░рзА ржХрж┐ржирзНрждрзБ ржЕржирзЗржХ ржлрж┐ржЪрж╛рж░ |
| Complex layouts       | ржкрзНрж░рж╛рзЯ ржЕрж╕ржорзНржнржм           | рж╕рж╣ржЬрзЗ рж╕ржорзНржнржм                    |



ЁЯЧВя╕П Entity Relationship Diagram (ERD - Text Version)
тФМтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФР
тФВ      police_station        тФВ
тФЬтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФд
тФВ id              (PK)       тФВ
тФВ police_id       (UK)       тФВтЧДтФАтФАтФАтФАтФАтФАтФАтФАтФР
тФВ officer_name               тФВ         тФВ
тФВ branch_name                тФВ         тФВ
тФВ district                   тФВ         тФВ
тФВ password_hash              тФВ         тФВ
тФВ created_at                 тФВ         тФВ
тФФтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФШ         тФВ
                                       тФВ
                                       тФВ
         тФМтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФШ
         тЦ╝
тФМтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФР
тФВ       criminal_info        тФВ
тФЬтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФд
тФВ id              (PK)       тФВ
тФВ police_id       (FK)тФАтФАтФАтФАтФАтФАтФАтФШ
тФВ name                       тФВ
тФВ aadhaar         (UK)       тФВ
тФВ address                    тФВ
тФВ phone           (UK)       тФВ
тФВ photo_url                  тФВ
тФВ created_at                 тФВ
тФФтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФШ
         тФВ
         тФВ
         тЦ╝
тФМтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФР
тФВ   criminal_description     тФВ
тФЬтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФд
тФВ id              (PK)       тФВ
тФВ criminal_id     (FK)тФАтФАтФАтФАтФАтФАтФАтФР
тФВ police_id       (FK)тФАтФАтФАтФАтФР  тФВ
тФВ type                       тФВ
тФВ fir_place                  тФВ
тФВ date                       тФВ
тФВ time                       тФВ
тФВ created_at                 тФВ
тФФтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФШ
ЁЯФБ рж╕ржорзНржкрж░рзНржХ ржмрзНржпрж╛ржЦрзНржпрж╛ (Relation Explanation)
police_station тЖТ criminal_info

ржПржХржЯрж┐ police_station.police_id ржЕржирзЗржХ criminal_info рж░рзЗржХрж░рзНржбрзЗрж░ ржЙрзОрж╕ рж╣рждрзЗ ржкрж╛рж░рзЗред

One-to-Many Relationshipред

criminal_info тЖТ criminal_description

ржПржХржЬржи ржЕржкрж░рж╛ржзрзАрж░ ржЬржирзНржп ржПржХрж╛ржзрж┐ржХ ржмрж┐ржмрж░ржг ржерж╛ржХрждрзЗ ржкрж╛рж░рзЗред

One-to-Many Relationshipред

criminal_description тЖТ police_station

ржЕржкрж░рж╛ржзрзЗрж░ ржмрж░рзНржгржирж╛рзЯ ржпрзЗ ржкрзБрж▓рж┐рж╢ ржЕржлрж┐рж╕рж╛рж░ рждржжржирзНржд ржХрж░рзЗржи, рждрж╛рж░ police_id рж░рж╛ржЦрж╛ рж╣рзЯред

ржПржЯрж╛ optional рж╣рзЯ ржХрж╛рж░ржг SET NULL ржХрж░рж╛ рж╣рзЯрзЗржЫрзЗред

-- Assuming USE mydatabase is already done

INSERT INTO police_station (police_id, officer_name, branch_name, district, password_hash)
VALUES
-- Alipurduar
('WBINC31072025ALIP1', 'Rana Dey', 'Incharge', 'Alipurduar', 'hashed_pass_1'),
('WBCID31072025ALIP1', 'Ritika Pal', 'CID', 'Alipurduar', 'hashed_pass_2'),

-- Bankura
('WBINC31072025BANK1', 'Sudip Das', 'Incharge', 'Bankura', 'hashed_pass_3'),
('WBCID31072025BANK1', 'Soma Roy', 'CID', 'Bankura', 'hashed_pass_4'),

-- Birbhum
('WBINC31072025BIRB1', 'Arnab Sen', 'Incharge', 'Birbhum', 'hashed_pass_5'),
('WBCID31072025BIRB1', 'Rina Das', 'CID', 'Birbhum', 'hashed_pass_6'),

-- Cooch Behar
('WBINC31072025COOC1', 'Arun Sharma', 'Incharge', 'Cooch Behar', 'hashed_pass_7'),
('WBCID31072025COOC1', 'Minu Ghosh', 'CID', 'Cooch Behar', 'hashed_pass_8'),

-- Dakshin Dinajpur
('WBINC31072025DDIN1', 'Sajal Bhuiya', 'Incharge', 'Dakshin Dinajpur', 'hashed_pass_9'),
('WBCID31072025DDIN1', 'Bani Pal', 'CID', 'Dakshin Dinajpur', 'hashed_pass_10'),

-- Darjeeling
('WBINC31072025DARJ1', 'Binod Rai', 'Incharge', 'Darjeeling', 'hashed_pass_11'),
('WBCID31072025DARJ1', 'Pema Lama', 'CID', 'Darjeeling', 'hashed_pass_12'),

-- Hooghly
('WBINC31072025HOOG1', 'Debasis Saha', 'Incharge', 'Hooghly', 'hashed_pass_13'),
('WBCID31072025HOOG1', 'Reshmi Nandi', 'CID', 'Hooghly', 'hashed_pass_14'),

-- Howrah
('WBINC31072025HOWR1', 'Tanmoy Ghosh', 'Incharge', 'Howrah', 'hashed_pass_15'),
('WBCID31072025HOWR1', 'Pritha Banerjee', 'CID', 'Howrah', 'hashed_pass_16'),

-- Jalpaiguri
('WBINC31072025JALP1', 'Pritam Dutta', 'Incharge', 'Jalpaiguri', 'hashed_pass_17'),
('WBCID31072025JALP1', 'Sonali Sinha', 'CID', 'Jalpaiguri', 'hashed_pass_18'),

-- Jhargram
('WBINC31072025JHAR1', 'Anup Mondal', 'Incharge', 'Jhargram', 'hashed_pass_19'),
('WBCID31072025JHAR1', 'Reema Das', 'CID', 'Jhargram', 'hashed_pass_20'),

-- Kalimpong
('WBINC31072025KALI1', 'Ramesh Thapa', 'Incharge', 'Kalimpong', 'hashed_pass_21'),
('WBCID31072025KALI1', 'Sangita Lepcha', 'CID', 'Kalimpong', 'hashed_pass_22'),

-- Kolkata
('WBINC31072025KOLK1', 'Subhankar Sen', 'Incharge', 'Kolkata', 'hashed_pass_23'),
('WBCID31072025KOLK1', 'Neha Bose', 'CID', 'Kolkata', 'hashed_pass_24'),

-- Malda
('WBINC31072025MALD1', 'Ritwik Saha', 'Incharge', 'Malda', 'hashed_pass_25'),
('WBCID31072025MALD1', 'Suchismita Das', 'CID', 'Malda', 'hashed_pass_26'),

-- Murshidabad
('WBINC31072025MURS1', 'Sandeep Sinha', 'Incharge', 'Murshidabad', 'hashed_pass_27'),
('WBCID31072025MURS1', 'Arpita Chowdhury', 'CID', 'Murshidabad', 'hashed_pass_28'),

-- Nadia
('WBINC31072025NADI1', 'Dipak Das', 'Incharge', 'Nadia', 'hashed_pass_29'),
('WBCID31072025NADI1', 'Jaya Ghosh', 'CID', 'Nadia', 'hashed_pass_30'),

-- Paschim Bardhaman
('WBINC31072025PBAR1', 'Rajib Ghosh', 'Incharge', 'Paschim Bardhaman', 'hashed_pass_31'),
('WBCID31072025PBAR1', 'Tanima Roy', 'CID', 'Paschim Bardhaman', 'hashed_pass_32'),

-- Paschim Medinipur
('WBINC31072025PMED1', 'Mihir Das', 'Incharge', 'Paschim Medinipur', 'hashed_pass_33'),
('WBCID31072025PMED1', 'Monika Das', 'CID', 'Paschim Medinipur', 'hashed_pass_34'),

-- Purba Bardhaman
('WBINC31072025EBAR1', 'Sourav Pal', 'Incharge', 'Purba Bardhaman', 'hashed_pass_35'),
('WBCID31072025EBAR1', 'Piyali Ghosh', 'CID', 'Purba Bardhaman', 'hashed_pass_36'),

-- Purba Medinipur
('WBINC31072025EMED1', 'Satyajit Ray', 'Incharge', 'Purba Medinipur', 'hashed_pass_37'),
('WBCID31072025EMED1', 'Ritika Basu', 'CID', 'Purba Medinipur', 'hashed_pass_38'),

-- Purulia
('WBINC31072025PURU1', 'Dilip Marandi', 'Incharge', 'Purulia', 'hashed_pass_39'),
('WBCID31072025PURU1', 'Bipasha Majhi', 'CID', 'Purulia', 'hashed_pass_40'),

-- Uttar Dinajpur
('WBINC31072025UDIN1', 'Bijoy Roy', 'Incharge', 'Uttar Dinajpur', 'hashed_pass_41'),
('WBCID31072025UDIN1', 'Mitali Das', 'CID', 'Uttar Dinajpur', 'hashed_pass_42'),

-- 24 Parganas (North)
('WBINC31072025N24P1', 'Tapas Sen', 'Incharge', 'North 24 Parganas', 'hashed_pass_43'),
('WBCID31072025N24P1', 'Reshmi Mitra', 'CID', 'North 24 Parganas', 'hashed_pass_44'),

-- 24 Parganas (South)
('WBINC31072025S24P1', 'Asit Dey', 'Incharge', 'South 24 Parganas', 'hashed_pass_45'),
('WBCID31072025S24P1', 'Mousumi Pal', 'CID', 'South 24 Parganas', 'hashed_pass_46');



| **ржЕржкрж╛рж░рзЗрж╢ржи ржЯрж╛ржЗржк**             | **ржХрзЛржерж╛рзЯ рж░рж╛ржЦржмрзЗ?** | **ржХрж╛рж░ржг**                                                       |
| ---------------------------- | ---------------- | -------------------------------------------------------------- |
| **Transaction**              | Database         | ржбрзЗржЯрж╛ ржХржирж╕рж┐рж╕ржЯрзЗржирзНржЯ рж░рж╛ржЦрждрзЗ (ржпрзЗржоржи ржорж╛рж▓рзНржЯрж┐-ржЯрзЗржмрж┐рж▓ ржЗржирж╕рж╛рж░рзНржЯ/ржЖржкржбрзЗржЯ)        |
| **Index**                    | Database         | рж╕рж╛рж░рзНржЪ/ржлрж┐рж▓рзНржЯрж╛рж░ ржЦрзБржм ржжрзНрж░рзБржд ржХрж░рж╛рж░ ржЬржирзНржп                              |
| **View**                     | Database         | ржЬржЯрж┐рж▓ Join/Query рж░рзЗржбрж┐-ржЯрзБ-ржЗржЙржЬ ржлрж░рзНржорзЗ рж░рж╛ржЦрждрзЗ                        |
| **Stored Procedure**         | Database         | ржЬржЯрж┐рж▓ рж▓ржЬрж┐ржХ, ржорж╛рж▓рзНржЯрж┐-ржЯрзЗржмрж┐рж▓ ржЕржкрж╛рж░рзЗрж╢ржи, ржлрж┐ржХрзНрж╕ржб ржкрзНрж░рж╕рзЗрж╕ ржжрзНрж░рзБржд ржХрж░рж╛рж░ ржЬржирзНржп,ржжрж┐рзЯрзЗ ржбрж╛ржЯрж╛ ржЗржирж╕рж╛рж░рзНржЯ ржХрж░рзЛ + рж▓ржЬрж┐ржХ ржХржирзНржЯрзНрж░рзЛрж▓ ржХрж░рзЛ|
| **Trigger**                  | Database         | Trigger ржжрж┐рзЯрзЗ рж▓ржШрзБ ржХрж╛ржЬ (ржпрзЗржоржи рж▓ржЧ рж░рж╛ржЦрж╛) ржХрж░рж╛ржирзЛ ржнрж╛рж▓рзЛ ,Trigger ржжрж┐рзЯрзЗ ржбрж╛ржЯрж╛ ржЗржирзНрж╕рж╛рж░рзНржЯ ржХрж░рж╛ ржпрж╛рзЯ, ржХрж┐ржирзНрждрзБ ржбрж╛ржЯрж╛ ржорзНржпрж╛ржирзЗржЬ ржХрж░рж╛ ржЭрж╛ржорзЗрж▓рж╛рж░ ржХрж╛рж░ржг рж╣рждрзЗ ржкрж╛рж░рзЗ (Debug, Error Handling ржХржарж┐ржи)|
| **Validation**               | Node.js          | ржЗржЙржЬрж╛рж░рзЗрж░ ржЗржиржкрзБржЯ ржЪрзЗржХ ржХрж░рж╛, ржнрзБрж▓ ржбрзЗржЯрж╛ ржЖржЯржХрж╛ржирзЛ                         |
| **Security**                 | Node.js          | ржкрж╛рж╕ржУрзЯрж╛рж░рзНржб рж╣рзНржпрж╛рж╢, JWT ржЯрзЛржХрзЗржи, рж░рзЛрж▓-ржмрзЗрж╕ржб ржЕрзНржпрж╛ржХрзНрж╕рзЗрж╕                 |
| **API Response**             | Node.js          | JSON ржлрж░ржорзНржпрж╛ржЯ, ржПрж░рж░/рж╕рж╛ржХрж╕рзЗрж╕ ржорзЗрж╕рзЗржЬ                                 |
| **Business Logic (Dynamic)** | Node.js          | ржпрзЗржЦрж╛ржирзЗ ржбрзЗржЯрж╛ ржЪрзЗржЮрзНржЬрж┐ржВ ржХржирзНржбрж┐рж╢ржи ржЕржирзБржпрж╛рзЯрзА рж╣ржмрзЗ                        |

** Just Overview 
Stored Procedure (Insert)
 DELIMITER $$
CREATE PROCEDURE sp_insert_police_station(
    IN p_station_name VARCHAR(100),
    IN p_station_address TEXT
)
BEGIN
    -- Main Table Insert
    INSERT INTO police_station (station_name, station_address)
    VALUES (p_station_name, p_station_address);

    -- Log Table Insert
    INSERT INTO police_station_log (station_id, action_type)
    VALUES (LAST_INSERT_ID(), 'INSERT');
END$$
DELIMITER ;

Insert Trigger
DELIMITER $$
CREATE TRIGGER trg_police_station_insert
AFTER INSERT ON police_station
FOR EACH ROW
BEGIN
    INSERT INTO police_station_log (station_id, action_type)
    VALUES (NEW.station_id, 'INSERT');
END$$
DELIMITER ;

Update Trigger
DELIMITER $$
CREATE TRIGGER trg_police_station_update
AFTER UPDATE ON police_station
FOR EACH ROW
BEGIN
    INSERT INTO police_station_log (station_id, action_type)
    VALUES (NEW.station_id, 'UPDATE');
END$$
DELIMITER ;

Delete Trigger
DELIMITER $$
CREATE TRIGGER trg_police_station_delete
AFTER DELETE ON police_station
FOR EACH ROW
BEGIN
    INSERT INTO police_station_log (station_id, action_type)
    VALUES (OLD.station_id, 'DELETE');
END$$
DELIMITER ;

ржХрзЗржи Delete Trigger ржХрж╛ржЬ ржХрж░ржмрзЗ ржирж╛?
DELETE Trigger рждржЦржиржЗ ржЪрж▓рзЗ ржпржЦржи DELETE FROM table_name ржХрж░рж╛ рж╣рзЯред

Status change (ржпрзЗржоржи Active тЖТ Inactive ржмрж╛ Inactive тЖТ Active) рж╣ржЪрзНржЫрзЗ UPDATE ржЕржкрж╛рж░рзЗрж╢ржи, DELETE ржирзЯред

рждрж╛ржЗ ржПржЗ ржХрзНрж╖рзЗрждрзНрж░рзЗ AFTER UPDATE Trigger рж▓рж╛ржЧржмрзЗ, ржпрж╛рждрзЗ Status ржкрж░рж┐ржмрж░рзНрждржи рж╣рж▓рзЗ рж▓ржЧ/ржнрж┐ржЙ ржЯрзЗржмрж┐рж▓рзЗ рж░рзЗржХрж░рзНржб рж╣рзЯред

Status ржкрж░рж┐ржмрж░рзНрждржирзЗрж░ ржЬржирзНржп Trigger -----

DELIMITER $$

CREATE TRIGGER criminal_info_status_change
AFTER UPDATE ON criminal_info
FOR EACH ROW
BEGIN
    -- рж╢рзБржзрзБ рждржЦржи ржХрж╛ржЬ ржХрж░ржмрзЗ ржпржЦржи status ржкрж░рж┐ржмрж░рзНрждрж┐ржд рж╣ржмрзЗ
    IF NEW.status <> OLD.status THEN -- NEW.status <> OLD.status тЖТ ржмрзЛржЭрж╛рзЯ, ржпржжрж┐ status ржкрж░рж┐ржмрж░рзНрждржи рж╣рзЯ
        INSERT INTO criminal_status_log (criminal_id, old_status, new_status, changed_at)
        VALUES (OLD.id, OLD.status, NEW.status, NOW()); -- рж▓ржЧ ржЯрзЗржмрж┐рж▓рзЗ ржЖржЧрзЗрж░ status ржЖрж░ ржирждрзБржи status рж╕рзЗржн рж╣ржмрзЗ
    END IF;
END$$

DELIMITER ;